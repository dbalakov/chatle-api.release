// Chatle api (version 0.1.20)
(function(){var b;b=function(){function c(a,e,f){this.key=a;this.host=e;this.transport=f;if(null==this.key)throw Error("ChatleClient constructor call without api key");null==this.host&&(this.host=c.DEFAULT_HOST);null==this.transport&&(this.transport=new c.Transport(this.host,this.key));this.auth=new c.Auth(this);this.rooms=new c.Rooms(this);this.users=new c.Users(this)}c.prototype.setAuthToken=function(a){return this.transport.authToken=a};return c}();b.DEFAULT_HOST="https://chatle.co/system/widgets/api/api.html";
window.ChatleClient=b}).call(this);
(function(){var b,c=function(a,e){return function(){return a.apply(e,arguments)}};b=function(){function a(a,f){var d=this;this.frame_url=a;this.key=f;this.sendCommandToFrame=c(this.sendCommandToFrame,this);if(null==this.frame_url)throw Error("ChatleClient.Transport constructor call without frame_url");if(null==this.key)throw Error("ChatleClient.Transport constructor call without key");this.iframe=document.createElement("iframe");this.iframe.src=this.frame_url;this.iframe.setAttribute("style","width:0;height:0;display:none");
document.body.appendChild(this.iframe);this.queue=[];this.data=null;window.addEventListener("message",function(a){var e;if(null!=d.data)return e=a.data,a=d.data,d.data=null,"function"===typeof a.callback?a.callback("ok"===e.status?null:e.errorStatus,"ok"===e.status?e.data:null):void 0});setInterval(this.sendCommandToFrame,100)}a.prototype.sendCommandToFrame=function(){if(null==this.data&&0!==this.queue.length)return this.data=this.queue.shift(),null!=this.authToken&&(null==this.data.command.headers&&
(this.data.command.headers={}),this.data.command.headers["X-Auth-Token"]=this.authToken),this.iframe.contentWindow.postMessage(this.data.command,"*")};a.prototype.sendCommand=function(a,f,c,b){this.queue.push({command:{id:1,type:a,url:f,data:c,headers:{"X-AppKey":this.key}},callback:b});return this.sendCommandToFrame()};a.prototype.get=function(a,c,b){return this.sendCommand("GET",a,c,b)};a.prototype.post=function(a,c,b){return this.sendCommand("POST",a,c,b)};a.prototype.put=function(a,c,b){return this.sendCommand("PUT",
a,c,b)};a.prototype["delete"]=function(a,c,b){return this.sendCommand("DELETE",a,c,b)};return a}();ChatleClient.Transport=b}).call(this);
(function(){var b;b=function(){function c(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Auth constructor call without client");}c.prototype.registerMobile=function(a,e){return this.client.transport.get(""+c.URL+c.REGISTER_MOBILE_URL,{number:a},e)};c.prototype.registerEmail=function(a,e){return this.client.transport.get(""+c.URL+c.REGISTER_EMAIL_URL,{email:a},e)};c.prototype.confirmCode=function(a,e,b,d){return this.client.transport.get(""+c.URL+c.CONFIRM_CODE_URL,{confirmation_id:a,
code:e,display_name:b},d)};return c}();b.URL="/api/auth/";b.REGISTER_MOBILE_URL="register_mobile";b.REGISTER_EMAIL_URL="email";b.CONFIRM_CODE_URL="confirm_code";ChatleClient.Auth=b}).call(this);
(function(){var b,c;b=function(){function a(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Rooms constructor call without client");}a.prototype.list=function(c){return this.client.transport.get(""+a.URL,null,c)};a.prototype.messages=function(c,b,d){return this.client.transport.get(""+a.URL+"/"+c,b,d)};a.prototype.sendMessage=function(b,f,d){return this.client.transport.post(""+a.URL+"/"+b+"/"+a.SEND_MESSAGE_URL,{message:{text:f,guid:c()}},d)};a.prototype.deleteMessage=function(c,
b,d){return this.client.transport["delete"](""+a.URL+"/"+c+"/"+b,null,d)};a.prototype.createPrivate=function(c,b,d){return this.client.transport.get(""+a.URL+"/"+a.CREATE_PRIVATE_ROOM_URL,{user_id:c,group:b},d)};a.prototype.createInviteOnly=function(c,b,d,g){return this.client.transport.get(""+a.URL+"/"+a.CREATE_INVITE_ONLY_URL,{user_ids:c,group:b,name:d},g)};a.prototype.update=function(c,b,d,g,h,k){return this.client.transport.put(""+a.URL+"/"+c,{group:b,name:d,mute:g,data:h},k)};a.prototype.invite=
function(c,b,d){var g;g={};g[b instanceof Array?"user_ids":"user"]=b;return this.client.transport.get(""+a.URL+"/"+c+"/"+a.INVITE_USERS,g,d)};a.prototype.leave=function(c,b){return this.client.transport.get(""+a.URL+"/"+c+"/"+a.LEAVE,null,b)};return a}();b.URL="/api/rooms";b.SEND_MESSAGE_URL="message";b.CREATE_PRIVATE_ROOM_URL="private";b.CREATE_INVITE_ONLY_URL="group";b.INVITE_USERS="invite";b.LEAVE="leave";c=function(){var a;return a=""+"0123456789QWERTYUIOPASDFGHJKLZXCVBNM"[Math.round(35*Math.random())]};
ChatleClient.Rooms=b}).call(this);
(function(){var b;b=function(){function c(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Users constructor call without client");}c.prototype.me=function(a){return this.client.transport.get(""+c.URL+"/"+c.ME_URL,null,a)};c.prototype.info=function(a,b){return this.client.transport.get(""+c.URL+"/"+a,null,b)};c.prototype.update=function(a,b,f,d){return this.client.transport.post(""+c.URL+"/"+c.UPDATE_URL,{first_name:a,last_name:b,display_name:f},d)};return c}();b.URL="/api/users";b.ME_URL=
"me";b.UPDATE_URL="me";ChatleClient.Users=b}).call(this);
