// Chatle api (version 0.2.24)
(function(){var b;b=function(){function a(c,d,f,e){this.key=c;this.host=d;this.transport=f;if(null==this.key)throw Error("ChatleClient constructor call without api key");null==this.host&&(this.host=a.DEFAULT_HOST);null==this.transport&&(this.transport=new a.Transport(this.host,this.key,e));this.auth=new a.Auth(this);this.rooms=new a.Rooms(this);this.users=new a.Users(this)}a.prototype.setAuthToken=function(a){return this.transport.authToken=a};a.prototype.deactivate=function(){return this.transport.deactivate()};
return a}();b.DEFAULT_HOST="https://chatle.co/system/widgets/api/api.html";window.ChatleClient=b}).call(this);
(function(){var b,a=function(a,d){return function(){return a.apply(d,arguments)}};b=function(){function c(d,c){this.frame_url=d;this.key=c;this.onmessage=a(this.onmessage,this);this.onload=a(this.onload,this);if(null==this.frame_url)throw Error("ChatleClient.Transport constructor call without frame_url");if(null==this.key)throw Error("ChatleClient.Transport constructor call without key");this.id=this.generateGuid();this.loaded=!1;this.queue=[];this.iframe=document.createElement("iframe");this.iframe.src=
""+this.frame_url+"#"+this.id;this.iframe.setAttribute("style","width:0;height:0;display:none");document.body.appendChild(this.iframe);this.commands={index:0};window.addEventListener("message",this.onload)}c.prototype.onload=function(d){if(null!=d&&null!=d.data&&d.data.id===this.id){for(this.loaded=!0;0<this.queue.length;)d=this.queue.shift(),this.sendCommand(d.type,d.url,d.data,d.callback);window.removeEventListener("message",this.onload);return window.addEventListener("message",this.onmessage)}};
c.prototype.onmessage=function(d){var a;a=d.data;d=this.commands[a.id];if(null!=d)return delete this.commands[a.id],"function"===typeof d.callback?d.callback("ok"===a.status?null:a.errorStatus,"ok"===a.status?a.data:null):void 0};c.prototype.generateGuid=function(){var a,c;a="";for(c=0;31>=c;++c)a+="0123456789QWERTYUIOPASDFGHJKLZXCVBNM"[Math.round(35*Math.random())];return a};c.prototype.sendCommand=function(a,c,e,b){if(!this.loaded)return this.queue.push({type:a,url:c,data:e,callback:b});e={command:{id:""+
this.id+"_"+this.commands.index++,type:a,url:c,data:e,headers:{"X-AppKey":this.key}},callback:b};null!=this.authToken&&(null==e.command.headers&&(e.command.headers={}),e.command.headers["X-Auth-Token"]=this.authToken);this.commands[e.command.id]=e;return this.iframe.contentWindow.postMessage(e.command,"*")};c.prototype.get=function(a,c,b){return this.sendCommand("GET",a,c,b)};c.prototype.post=function(a,c,b){return this.sendCommand("POST",a,c,b)};c.prototype.put=function(a,c,b){return this.sendCommand("PUT",
a,c,b)};c.prototype["delete"]=function(a,c,b){return this.sendCommand("DELETE",a,c,b)};c.prototype.deactivate=function(){window.removeEventListener("message",this.onload);window.removeEventListener("message",this.onmessage);return this.iframe.parentNode.removeChild(this.iframe)};return c}();ChatleClient.Transport=b}).call(this);
(function(){var b;b=function(){function a(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Auth constructor call without client");}a.prototype.registerMobile=function(c,d){return this.client.transport.get(""+a.URL+a.REGISTER_MOBILE_URL,{number:c},d)};a.prototype.registerEmail=function(c,d){return this.client.transport.get(""+a.URL+a.REGISTER_EMAIL_URL,{email:c},d)};a.prototype.confirmCode=function(c,d,b,e){return this.client.transport.get(""+a.URL+a.CONFIRM_CODE_URL,{confirmation_id:c,
code:d,display_name:b},e)};return a}();b.URL="/api/auth/";b.REGISTER_MOBILE_URL="register_mobile";b.REGISTER_EMAIL_URL="email";b.CONFIRM_CODE_URL="confirm_code";ChatleClient.Auth=b}).call(this);
(function(){var b;b=function(){function a(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Rooms constructor call without client");}a.prototype.list=function(c){return this.client.transport.get(""+a.URL,null,c)};a.prototype.messages=function(c,d,b){return this.client.transport.get(""+a.URL+"/"+c,d,b)};a.prototype.sendMessage=function(c,d,b){return this.client.transport.post(""+a.URL+"/"+c+"/"+a.SEND_MESSAGE_URL,{message:{text:d,guid:this.client.transport.generateGuid()}},b)};a.prototype.deleteMessage=
function(c,d,b){return this.client.transport["delete"](""+a.URL+"/"+c+"/"+d,null,b)};a.prototype.createPrivate=function(c,b,f){return this.client.transport.get(""+a.URL+"/"+a.CREATE_PRIVATE_ROOM_URL,{user_id:c,group:b},f)};a.prototype.createInviteOnly=function(c,b,f,e){return this.client.transport.get(""+a.URL+"/"+a.CREATE_INVITE_ONLY_URL,{user_ids:c,group:b,name:f},e)};a.prototype.update=function(c,b,f,e,g,h){return this.client.transport.put(""+a.URL+"/"+c,{group:b,name:f,mute:e,data:g},h)};a.prototype.invite=
function(c,b,f){var e;e={};e[b instanceof Array?"user_ids":"user"]=b;return this.client.transport.get(""+a.URL+"/"+c+"/"+a.INVITE_USERS,e,f)};a.prototype.leave=function(c,b){return this.client.transport.get(""+a.URL+"/"+c+"/"+a.LEAVE,null,b)};return a}();b.URL="/api/rooms";b.SEND_MESSAGE_URL="message";b.CREATE_PRIVATE_ROOM_URL="private";b.CREATE_INVITE_ONLY_URL="group";b.INVITE_USERS="invite";b.LEAVE="leave";ChatleClient.Rooms=b}).call(this);
(function(){var b;b=function(){function a(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Users constructor call without client");}a.prototype.me=function(c){return this.client.transport.get(""+a.URL+"/"+a.ME_URL,null,c)};a.prototype.info=function(c,b){return this.client.transport.get(""+a.URL+"/"+c,null,b)};a.prototype.update=function(b,d,f,e){return this.client.transport.post(""+a.URL+"/"+a.UPDATE_URL,{first_name:b,last_name:d,display_name:f},e)};return a}();b.URL="/api/users";b.ME_URL=
"me";b.UPDATE_URL="me";ChatleClient.Users=b}).call(this);
