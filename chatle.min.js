// Chatle api (version 0.1.18)
(function(){var c;c=function(){function b(a,d,g){this.key=a;this.host=d;this.transport=g;if(null==this.key)throw Error("ChatleClient constructor call without api key");null==this.host&&(this.host=b.DEFAULT_HOST);null==this.transport&&(this.transport=new b.Transport(this.host,this.key));this.auth=new b.Auth(this);this.rooms=new b.Rooms(this);this.users=new b.Users(this)}b.prototype.setAuthToken=function(a){return this.transport.authToken=a};return b}();c.DEFAULT_HOST="https://chatle.co/system/widgets/api/api.html";
window.ChatleClient=c}).call(this);
(function(){var c;c=function(){function b(a,d){var b=this;this.frame_url=a;this.key=d;if(null==this.frame_url)throw Error("ChatleClient.Transport constructor call without frame_url");if(null==this.key)throw Error("ChatleClient.Transport constructor call without key");this.iframe=document.createElement("iframe");this.iframe.src=this.frame_url;this.iframe.setAttribute("style","width:0;height:0;display:none");document.body.appendChild(this.iframe);this.queue=[];this.data=null;window.addEventListener("message",
function(a){var d;if(null!=b.data)return a=a.data,"function"===typeof(d=b.data).callback&&d.callback("ok"===a.status?null:a.errorStatus,"ok"===a.status?a.data:null),b.data=null})}b.prototype.interval=function(){var a,d;if(null!=this.data){a=this.iframe.src.split("#")[1];if(null==a||a===this.data.hash||""===a)return;a=JSON.parse(a);this.data=null;"function"===typeof(d=this.data).callback&&d.callback("ok"===a.status?null:a.errorStatus,"ok"===a.status?a.data:null)}return this.sendCommandToFrame()};b.prototype.sendCommandToFrame=
function(){if(null==this.data&&0!==this.queue.length)return this.data=this.queue.shift(),null!=this.authToken&&(null==this.data.command.headers&&(this.data.command.headers={}),this.data.command.headers["X-Auth-Token"]=this.authToken),this.iframe.contentWindow.postMessage(this.data.command,"*")};b.prototype.sendCommand=function(a,d,b,c){this.queue.push({command:{id:1,type:a,url:d,data:b,headers:{"X-AppKey":this.key}},callback:c});return this.sendCommandToFrame()};b.prototype.get=function(a,d,b){return this.sendCommand("GET",
a,d,b)};b.prototype.post=function(a,d,b){return this.sendCommand("POST",a,d,b)};b.prototype.put=function(a,b,c){return this.sendCommand("PUT",a,b,c)};b.prototype["delete"]=function(a,b,c){return this.sendCommand("DELETE",a,b,c)};return b}();ChatleClient.Transport=c}).call(this);
(function(){var c;c=function(){function b(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Auth constructor call without client");}b.prototype.registerMobile=function(a,d){return this.client.transport.get(""+b.URL+b.REGISTER_MOBILE_URL,{number:a},d)};b.prototype.registerEmail=function(a,d){return this.client.transport.get(""+b.URL+b.REGISTER_EMAIL_URL,{email:a},d)};b.prototype.confirmCode=function(a,d,c,e){return this.client.transport.get(""+b.URL+b.CONFIRM_CODE_URL,{confirmation_id:a,
code:d,display_name:c},e)};return b}();c.URL="/api/auth/";c.REGISTER_MOBILE_URL="register_mobile";c.REGISTER_EMAIL_URL="email";c.CONFIRM_CODE_URL="confirm_code";ChatleClient.Auth=c}).call(this);
(function(){var c,b;c=function(){function a(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Rooms constructor call without client");}a.prototype.list=function(b){return this.client.transport.get(""+a.URL,null,b)};a.prototype.messages=function(b,c,e){return this.client.transport.get(""+a.URL+"/"+b,c,e)};a.prototype.sendMessage=function(d,c,e){return this.client.transport.post(""+a.URL+"/"+d+"/"+a.SEND_MESSAGE_URL,{message:{text:c,guid:b()}},e)};a.prototype.deleteMessage=function(b,
c,e){return this.client.transport["delete"](""+a.URL+"/"+b+"/"+c,null,e)};a.prototype.createPrivate=function(b,c,e){return this.client.transport.get(""+a.URL+"/"+a.CREATE_PRIVATE_ROOM_URL,{user_id:b,group:c},e)};a.prototype.createInviteOnly=function(b,c,e,f){return this.client.transport.get(""+a.URL+"/"+a.CREATE_INVITE_ONLY_URL,{user_ids:b,group:c,name:e},f)};a.prototype.update=function(b,c,e,f,h,k){return this.client.transport.put(""+a.URL+"/"+b,{group:c,name:e,mute:f,data:h},k)};a.prototype.invite=
function(b,c,e){var f;f={};f[c instanceof Array?"user_ids":"user"]=c;return this.client.transport.get(""+a.URL+"/"+b+"/"+a.INVITE_USERS,f,e)};a.prototype.leave=function(b,c){return this.client.transport.get(""+a.URL+"/"+b+"/"+a.LEAVE,null,c)};return a}();c.URL="/api/rooms";c.SEND_MESSAGE_URL="message";c.CREATE_PRIVATE_ROOM_URL="private";c.CREATE_INVITE_ONLY_URL="group";c.INVITE_USERS="invite";c.LEAVE="leave";b=function(){var a;return a=""+"0123456789QWERTYUIOPASDFGHJKLZXCVBNM"[Math.round(35*Math.random())]};
ChatleClient.Rooms=c}).call(this);
(function(){var c;c=function(){function b(a){this.client=a;if(null==this.client)throw Error("ChatleClient.Users constructor call without client");}b.prototype.me=function(a){return this.client.transport.get(""+b.URL+"/"+b.ME_URL,null,a)};b.prototype.info=function(a,c){return this.client.transport.get(""+b.URL+"/"+a,null,c)};b.prototype.update=function(a,c,g,e){return this.client.transport.post(""+b.URL+"/"+b.UPDATE_URL,{first_name:a,last_name:c,display_name:g},e)};return b}();c.URL="/api/users";c.ME_URL=
"me";c.UPDATE_URL="me";ChatleClient.Users=c}).call(this);
